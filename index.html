<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ZZT的小小博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="这里是zzt的小小博客">
<meta property="og:type" content="website">
<meta property="og:title" content="ZZT的小小博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ZZT的小小博客">
<meta property="og:description" content="这里是zzt的小小博客">
<meta property="article:author" content="zzt">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="ZZT的小小博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ZZT的小小博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">zztzztzzt</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-备份" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E5%A4%87%E4%BB%BD/" class="article-date">
  <time datetime="2020-06-04T05:18:24.270Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E5%A4%87%E4%BB%BD/">备份</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>作死來一手deepin……</p>
<p>来吧 支持国产 做机房<del>电脑</del>最亮的仔</p>
<p>备份下配置……</p>
<p>vscode  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"editor.fontSize"</span>: <span class="number">16</span>,</span><br><span class="line">    <span class="attr">"editor.cursorSmoothCaretAnimation"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"editor.cursorBlinking"</span>: <span class="string">"expand"</span>,</span><br><span class="line">    <span class="attr">"editor.fontFamily"</span>: <span class="string">"Consolas, 'Courier New', monospace"</span>,</span><br><span class="line">    <span class="attr">"editor.smoothScrolling"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"workbench.colorTheme"</span>: <span class="string">"Monokai"</span>,</span><br><span class="line">    <span class="comment">// LaTeX</span></span><br><span class="line">    <span class="comment">//"latex-workshop.latex.autoBuild.run": "never",</span></span><br><span class="line">    <span class="comment">//"latex-workshop.message.error.show": false,</span></span><br><span class="line">    <span class="comment">//"latex-workshop.message.warning.show": false,</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">"latex-workshop.latex.tools"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"xelatex"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"xelatex"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"-synctex=1"</span>,</span><br><span class="line">                <span class="string">"-interaction=nonstopmode"</span>,</span><br><span class="line">                <span class="string">"-file-line-error"</span>,</span><br><span class="line">                <span class="string">"%DOCFILE%"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"pdflatex"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"pdflatex"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"-synctex=1"</span>,</span><br><span class="line">                <span class="string">"-interaction=nonstopmode"</span>,</span><br><span class="line">                <span class="string">"-file-line-error"</span>,</span><br><span class="line">                <span class="string">"%DOCFILE%"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"bibtex"</span>,</span><br><span class="line">            <span class="attr">"command"</span>: <span class="string">"bibtex"</span>,</span><br><span class="line">            <span class="attr">"args"</span>: [</span><br><span class="line">                <span class="string">"%DOCFILE%"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">"latex-workshop.latex.recipes"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"xelatex"</span>,</span><br><span class="line">            <span class="attr">"tools"</span>: [</span><br><span class="line">                <span class="string">"xelatex"</span></span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"pdflatex"</span>,</span><br><span class="line">            <span class="attr">"tools"</span>: [</span><br><span class="line">                <span class="string">"pdflatex"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"xe-&gt;bib-&gt;xe-&gt;xe"</span>,</span><br><span class="line">            <span class="attr">"tools"</span>: [</span><br><span class="line">                <span class="string">"xelatex"</span>,</span><br><span class="line">                <span class="string">"bibtex"</span>,</span><br><span class="line">                <span class="string">"xelatex"</span>,</span><br><span class="line">                <span class="string">"xelatex"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"pdf-&gt;bib-&gt;pdf-&gt;pdf"</span>,</span><br><span class="line">            <span class="attr">"tools"</span>: [</span><br><span class="line">                <span class="string">"pdflatex"</span>,</span><br><span class="line">                <span class="string">"bibtex"</span>,</span><br><span class="line">                <span class="string">"pdflatex"</span>,</span><br><span class="line">                <span class="string">"pdflatex"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"latex-workshop.view.pdf.viewer"</span>: <span class="string">"external"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">"latex-workshop.view.pdf.external.viewer.command"</span>: <span class="string">"C:/.../SumatraPDF.exe"</span>,</span><br><span class="line">    <span class="attr">"latex-workshop.view.pdf.external.viewer.args"</span>: [</span><br><span class="line">        <span class="string">"-forward-search"</span>,</span><br><span class="line">        <span class="string">"%TEX%"</span>,</span><br><span class="line">        <span class="string">"%LINE%"</span>,</span><br><span class="line">        <span class="string">"-reuse-instance"</span>,</span><br><span class="line">        <span class="string">"-inverse-search"</span>,</span><br><span class="line">        <span class="string">"\"C:/.../Microsoft VS Code/Code.exe\" \"C:/.../Microsoft VS Code/resources/app/out/cli.js\" -gr \"%f\":\"%l\""</span>,</span><br><span class="line">        <span class="string">"%PDF%"</span></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">"latex-workshop.view.pdf.external.synctex.command"</span>: <span class="string">"C:/.../SumatraPDF.exe"</span>,</span><br><span class="line">    <span class="attr">"latex-workshop.view.pdf.external.synctex.args"</span>: [</span><br><span class="line">        <span class="string">"-forward-search"</span>,</span><br><span class="line">        <span class="string">"%TEX%"</span>,</span><br><span class="line">        <span class="string">"%LINE%"</span>,</span><br><span class="line">        <span class="string">"-reuse-instance"</span>,</span><br><span class="line">        <span class="string">"-inverse-search"</span>,</span><br><span class="line">        <span class="string">"code \"C:/.../Microsoft VS Code/resources/app/out/cli.js\" -gr \"%f\":\"%l\""</span>,</span><br><span class="line">        <span class="string">"%PDF%"</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"editor.wordWrap"</span>: <span class="string">"on"</span>,</span><br><span class="line">    <span class="attr">"editor.autoClosingBrackets"</span>: <span class="string">"never"</span>,</span><br><span class="line">    <span class="attr">"explorer.confirmDelete"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"c-cpp-compile-run.cpp-flags"</span>: <span class="string">"-Wall -Wextra -DZTZ_CPP -fsanitize=undefined"</span>,</span><br><span class="line">    <span class="attr">"c-cpp-compile-run.c-flags"</span>: <span class="string">"-Wall -Wextra -DZTZ_CPP -fsanitize=undefined"</span>,</span><br><span class="line">    <span class="attr">"editor.mouseWheelZoom"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"explorer.confirmDragAndDrop"</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>vim</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">set ai</span><br><span class="line">set ts&#x3D;4</span><br><span class="line">set cul</span><br><span class="line">set nobk</span><br><span class="line">set ar</span><br><span class="line">set nu</span><br><span class="line">set ruler</span><br><span class="line">set shiftwidth&#x3D;4</span><br><span class="line"></span><br><span class="line">map &lt;F9&gt; :w&lt;CR&gt;:!g++ % -o %&lt; -Wall -Wextra -DZTZ_CPP -fsanitize&#x3D;undefined &amp;&amp; .&#x2F;%&lt; &lt;CR&gt;</span><br><span class="line">imap &lt;F9&gt; &lt;Esc&gt;&lt;F9&gt;</span><br><span class="line">map &lt;F8&gt; :!.&#x2F;%&lt;&lt;CR&gt;</span><br><span class="line">imap &lt;F8&gt; &lt;Esc&gt;&lt;F8&gt;</span><br><span class="line">map &lt;F7&gt; :w&lt;CR&gt;:!g++ % -o %&lt; -Wall -Wextra -DZTZ_CPP -fsanitize&#x3D;undefined&lt;CR&gt;</span><br><span class="line">imap &lt;F7&gt; &lt;Esc&gt;&lt;F7&gt;</span><br><span class="line"></span><br><span class="line">map &lt;F2&gt; :w&lt;CR&gt;:!gedit %&lt;CR&gt;</span><br><span class="line">imap &lt;F2&gt; &lt;Esc&gt;&lt;F2&gt;</span><br><span class="line">map &lt;F3&gt; :!&lt;CR&gt;</span><br><span class="line">imap &lt;F3&gt; &lt;Esc&gt;&lt;F3&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E5%A4%87%E4%BB%BD/" data-id="ckb0c2c7k000c5ygicv4ugsv5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-test200411" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/test200411/" class="article-date">
  <time datetime="2020-06-04T05:18:10.930Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/test200411/">test200411</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>又是一次不可写的题目</p>
<h1 id="T1-树链剖分"><a href="#T1-树链剖分" class="headerlink" title="T1 树链剖分"></a>T1 树链剖分</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给一棵以1为根的有根树,开始只有1有标记.</p>
<p>每次操作可以给某个点打上标记,或者询问从某个点开始向上跳,遇到的第一个有标记的点.</p>
<p>$n \le 10^6 , m \le 10^6$</p>
<h2 id="考场想法"><a href="#考场想法" class="headerlink" title="考场想法"></a>考场想法</h2><p>题目叫树链剖分，看了看提貌似真的可以树链剖分，就真写了树链剖分……给当前节点的子树全部染上当前这个节点的编号……但我可能没有考虑先到先算先来的，题目意思是只会找最下面的，而我的算法如果更新这个点，那么它的子树都会被影响。然而这显然是错的，因为如果下面有点被标记的话先返回的应该是更靠近下面的。</p>
<h2 id="正解"><a href="#正解" class="headerlink" title="正解"></a>正解</h2><ol>
<li><p>时间上不稳定算法<br>就是树链剖分……在神仙机器和神仙数据下，勉强可以卡过去</p>
</li>
<li><p>std<br>考虑并查集</p>
</li>
</ol>
<p>仔细分析性质, 如果一个点 x 从始至终都没有被标记, 就可以把 $x$ 合并到 $x$ 的父亲上去.</p>
<p>于是可以离线下来后倒着做, 将加标记变为删标记.</p>
<p>若一个点没有标记了, 就用并查集将它和它的父亲合并.</p>
<p>查询时直接在并查集中询问即可.</p>
<p>使用路径压缩来实现并查集, 时间复杂度 $O(m log n)$ , 期望得分 $100$ 分.</p>
<h1 id="T2-天气之子"><a href="#T2-天气之子" class="headerlink" title="T2 天气之子"></a>T2 天气之子</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>一共n个人（$n \le 10^1000$）</p>
<p>每个人到来时会选择离当前有人位置最远的位置</p>
<p>问最少多少个位置满足条件</p>
<p>第一个人在第一个位置，第二个人就再末尾，第三个再正中间，以此类推</p>
<h2 id="考场想法-1"><a href="#考场想法-1" class="headerlink" title="考场想法"></a>考场想法</h2><p>乱搞，然后高精度，成功爆炸</p>
<h2 id="正解-1"><a href="#正解-1" class="headerlink" title="正解"></a>正解</h2><p>打表找规律……</p>
<p>$f(x) = x + 2^{1+[\log_{2}{x−2}]}$</p>
<p>然后瞎搞高精度……</p>
<h1 id="T3"><a href="#T3" class="headerlink" title="T3"></a>T3</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>给定一个正整数 $k$ ,以及一棵 $n$ 个节点的以 $1$ 为根的有根树,边有长度.</p>
<p>记 $LCA(a,b)$ 表示 $a$ 与 $b$ 在树上的最近公共祖先, $dist(a)$ 表示树根到 $a$ 的距离.</p>
<p>每个节点可以是黑色或白色,初始时每个节点的颜色为白色.</p>
<p>进行 $m$ 次操作,每次操作是以下两种形式之一:</p>
<p>修改操作:给出一个修改节点 $x$ ,将节点 $x$ 染上黑色.保证 $x$ 在染色前为白色.</p>
<p>询问操作:给出一个询问节点 $x$ ,记所有黑点形成的集合为 $S$ ,求出下面式子的值:</p>
<p>$$<br>\sum_{y\in S} F(dist(LCA(x,y)))<br>$$</p>
<p>其中函数 $F$ 定义为,</p>
<p>$$<br>F(x)=\sum_{i=1}^x i^k<br>$$</p>
<p>由于答案可能很大,只需要输出答案对 $P=998244353$ 取模的结果.</p>
<h2 id="考试思路"><a href="#考试思路" class="headerlink" title="考试思路"></a>考试思路</h2><p>暴力一锤，结果还锤错了</p>
<h2 id="正解-2"><a href="#正解-2" class="headerlink" title="正解"></a>正解</h2><h3 id="算法二"><a href="#算法二" class="headerlink" title="算法二"></a>算法二</h3><p>若 $k=0$ ,就是询问 $\sum_{y\in S} dist(LCA(x,y))$ ,是不是很眼熟?</p>
<p>由于 $LCA$ 到根的距离就是 $x,y$ 到根的路径交集的长度,所以每加入一个点 $y$ 时,就将 $y$ 到根的路径上所有边的覆盖次数 $+1$ ,询问时答案就是 $x$ 到根的路径上每条边的长度 $\times$ 它的覆盖次数.</p>
<p>实际上每次给每条边加的权值就是这条边的长度,最后询问 $x$ 到根路径上所有边的权值之和.</p>
<p>时间复杂度 $O(n\log^2 n)$ ,结合算法一,期望得分 $40$ 分.</p>
<h3 id="算法三"><a href="#算法三" class="headerlink" title="算法三"></a>算法三</h3><p>利用差分思想,可以较容易地拓展到 $k&gt;0$ 的情况.</p>
<p>加入点 $y$ 时,仍然给 $y$ 到根的路径上所有边加一个权值,设这条边是 $f\to u$ ,那么加的权值就是 $F(dist(u))-F(dist(f))$ ,询问时仍然查询 $x$ 到根路径上所有边的权值之和,即差分值之和.</p>
<p>利用快速幂计算 $i^k$, 预处理出所有 $F(x)$ .时间复杂度 $O(D\log k +n\log^2 n)$ ,期望得分 $70\sim 100$ 分.</p>
<h3 id="算法四"><a href="#算法四" class="headerlink" title="算法四"></a>算法四</h3><p>利用线性筛预处理所有 $F(x)$ ,其余做法同算法三.</p>
<p>时间复杂度 $O(D+n\log^2 n)$ ,期望得分 $100$ 分.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/test200411/" data-id="ckb0c2c7e00095ygi7u8hgyny" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-分块板子" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E5%88%86%E5%9D%97%E6%9D%BF%E5%AD%90/" class="article-date">
  <time datetime="2020-06-04T05:17:58.186Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E5%88%86%E5%9D%97%E6%9D%BF%E5%AD%90/">分块板子</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.luogu.com.cn/problem/P2801" target="_blank" rel="noopener">真的是个板子……</a></p>
<p>这里存下，以免以后自己找不到……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxtot=<span class="number">1e3</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,q;</span><br><span class="line"><span class="keyword">int</span> block,tot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[maxn],d[maxn];</span><br><span class="line"><span class="keyword">int</span> belong[maxn],lazy[maxtot];</span><br><span class="line"><span class="keyword">int</span> l[maxtot],r[maxtot];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">	block=<span class="built_in">sqrt</span>(n);</span><br><span class="line">	tot=n/block;</span><br><span class="line">	<span class="keyword">if</span>(n%block)</span><br><span class="line">		tot++;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		belong[i]=(i<span class="number">-1</span>)/block+<span class="number">1</span>;</span><br><span class="line">		d[i]=a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++)&#123;</span><br><span class="line">		l[i]=(i<span class="number">-1</span>)*block+<span class="number">1</span>;</span><br><span class="line">		r[i]=i*block;</span><br><span class="line">	&#125;</span><br><span class="line">	r[tot]=n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++)</span><br><span class="line">		sort(d+l[i],d+r[i]+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(belong[x]==belong[y])&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=x;i&lt;=y;i++)</span><br><span class="line">			a[i]+=k;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=l[belong[x]];i&lt;=r[belong[x]];i++)</span><br><span class="line">			d[i]=a[i];</span><br><span class="line">		sort(d+l[belong[x]],d+r[belong[x]]+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=x;i&lt;=r[belong[x]];i++)</span><br><span class="line">			a[i]+=k;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=l[belong[x]];i&lt;=r[belong[x]];i++)</span><br><span class="line">			d[i]=a[i];</span><br><span class="line">		sort(d+l[belong[x]],d+r[belong[x]]+<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=l[belong[y]];i&lt;=y;i++)</span><br><span class="line">			a[i]+=k;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=l[belong[y]];i&lt;=r[belong[y]];i++)</span><br><span class="line">			d[i]=a[i];</span><br><span class="line">		sort(d+l[belong[y]],d+r[belong[y]]+<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=belong[x]+<span class="number">1</span>;i&lt;=belong[y]<span class="number">-1</span>;i++)</span><br><span class="line">			lazy[i]+=k;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(belong[x]==belong[y])</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=x;i&lt;=y;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(lazy[belong[x]]+a[i]&gt;=k)</span><br><span class="line">				ans++;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=x;i&lt;=r[belong[x]];i++)</span><br><span class="line">			<span class="keyword">if</span>(lazy[belong[x]]+a[i]&gt;=k)</span><br><span class="line">				ans++;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=l[belong[y]];i&lt;=y;i++)</span><br><span class="line">			<span class="keyword">if</span>(lazy[belong[y]]+a[i]&gt;=k)</span><br><span class="line">				ans++;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=belong[x]+<span class="number">1</span>;i&lt;=belong[y]<span class="number">-1</span>;i++)&#123;</span><br><span class="line">			<span class="keyword">int</span> ll=l[i],rr=r[i],mid,s=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(ll&lt;=rr)&#123;</span><br><span class="line">				mid=(ll+rr)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(d[mid]+lazy[i]&gt;=k)</span><br><span class="line">					rr=mid<span class="number">-1</span>,s=r[i]-mid+<span class="number">1</span>;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">					ll=mid+<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			ans+=s;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">int</span> l,r,k;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;q);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">	build();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;l,&amp;r,&amp;k);</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">'M'</span>)</span><br><span class="line">			change(l,r,k);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(l,r,k));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E5%88%86%E5%9D%97%E6%9D%BF%E5%AD%90/" data-id="ckb0c2c7i000b5ygicr8hbbj4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-test 200503" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/test%20200503/" class="article-date">
  <time datetime="2020-06-04T05:17:31.750Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/test%20200503/">test 200503</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="test-200503"><a href="#test-200503" class="headerlink" title="test 200503"></a>test 200503</h1><p>[TOC]</p>
<h2 id="T1-互质数组"><a href="#T1-互质数组" class="headerlink" title="T1 互质数组"></a>T1 互质数组</h2><h3 id="得分情况"><a href="#得分情况" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：100</p>
<p>实际：100</p>
<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>​        给你一个包含$n$个元素的数组$a_1, a_2, \dots, a_n$，现在你可以在任意位置插入任意多个<strong>整数</strong>，问最少要插入多少个数才能使得整个数组的相邻元素互质？两个数 $p$ 与 $q$ 互质当且仅当它们的最大公约数是 $1$ 。$b_1, b_2, \dots, b_t$最大公约数指的是这些数的公共约数中最大的那一个。</p>
<h3 id="正解"><a href="#正解" class="headerlink" title="正解"></a>正解</h3><p>​        就这？</p>
<p>​        没啥好讲的吧直接每两个相邻数判下 $\gcd$  就ok了吧。</p>
<p>​        全机房的人都切了……</p>
<h2 id="T2-线段"><a href="#T2-线段" class="headerlink" title="T2 线段"></a>T2 线段</h2><h3 id="得分情况-1"><a href="#得分情况-1" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：100</p>
<p>实际：10</p>
<p>改后：100</p>
<h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>​        现在给你 $n$ 个线段，每个线段的左端点是 $l_i$ ，右端点是 $r_i$ ，现在问每个线段包含了多少个线段（不含自身）</p>
<p>一个线段 $[a, b]$ 包含了线段 $[c, d]$ 当且仅当 $a \le c \le d \le b$。</p>
<p>对于 $100%$ 的数据，$1 \le n \le 10^5, 1 \le l_i \le r_i \le 10^9$。</p>
<h3 id="犯傻原因"><a href="#犯傻原因" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>​        不知道为什么明明可以树状数组搞一下结果我写了平衡树还出锅了……</p>
<h3 id="正解-1"><a href="#正解-1" class="headerlink" title="正解"></a>正解</h3><p>​        将所有线段按照左端点从大到小排序，那么对于排在后面线段的左端点一定是在排在前面的左端点的左边的，因此此时考虑包含关系时我们只需要考虑右端点的情况，即对于当前线段，统计出排在当前线段前面的那些线段中，有多少个线段的右端点小于当前线段的右端点即可，这个可以用树状数组很轻松地完成，但是注意左端点相同的线段应该要一起处理。</p>
<h2 id="T1-选取元素"><a href="#T1-选取元素" class="headerlink" title="T1 选取元素"></a>T1 选取元素</h2><h3 id="得分情况-2"><a href="#得分情况-2" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：50</p>
<p>实际：60</p>
<p>改后：100</p>
<h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>​        给出一个包含$n$个元素的数组$a_1, a_2, \dots a_n$，现在要你在这个数组中选取尽可能多的元素，使得这些元素的最小公倍数不超过$m$。$b_1, b_2, \dots, b_t$的最小公倍数被定义为这些数公共倍数中最小的那一个。</p>
<p>​        对于$50%$的数据，$1 \le n \le 100, 1 \le m \le 1000, 1 \le a_i \le 100$；</p>
<p>​        对于$80%$的数据，$1 \le n \le 10^6, 1 \le m \le 5\times 10^4, 1 \le a_i \le 10^9$；</p>
<p>​        对于 $100%$ 的数据，$1 \le n, m \le 10^6, 1 \le a_i \le 10^9$。</p>
<h3 id="犯傻原因-1"><a href="#犯傻原因-1" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>​        一开始直接暴力枚举了最小公倍数，然后我也不知道然后了……大概就这么水了个60分</p>
<h3 id="正解-2"><a href="#正解-2" class="headerlink" title="正解"></a>正解</h3><p>​        受到50分做法的启发，我们不难想到可以直接枚举最小公倍数是多少然后进行计算，假设我们枚举的最小公倍数为$x$，那么我们可以选择的元素个数为：</p>
<p>$$<br>f(x) = \sum_{i = 1}^n [a_i|x]<br>$$</p>
<p>​        而我们所求的答案即为：<br>$$<br>\min_{1 \le x \le m} f(x)<br>$$</p>
<p>​        但是直接按照上面的式子计算的复杂度是$O(nm)$的，不能承受，但是观察发现，$[a_i|x]$为$1$当且仅当$a_i$是$x$的倍数，因此如果我们统计出$a_i$有$cnt[a_i]$个，那么我们就可以用如下式子快速计算$f(x)$：<br>$$<br>f(x) = \sum_{d|x} cnt[d]<br>$$</p>
<p>​        因此通过枚举约数的方法，我们可以将总复杂度降到$O(m^{1.5})$，可以拿到80分。</p>
<p>​        注意到80分做法当中，$f(x)$的计算可以进一步优化，我们考虑$cnt[d]$会对哪些$f$产生贡献，观察发现，$cnt[d]$只会对$f$中$d$的倍数的那些位置产生贡献，因此复杂度将为$\displaystyle O\left(\sum_{d = 1}^{m} \dfrac{m}{d}\right) = O(m \log m)$，可以通过所有数据。</p>
<h2 id="Tx"><a href="#Tx" class="headerlink" title="Tx"></a>Tx</h2><h3 id="得分情况-3"><a href="#得分情况-3" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：0</p>
<p>实际：20</p>
<p>改后：</p>
<h3 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h3><p>​        给出一棵$n$个节点的无根树，每个节点有一个权值 $w_i$ ，你可以从选定<strong>任意节点</strong>为根开始以<strong>任意顺序</strong>深度优先遍历这棵树，问在你得到的遍历序列 $a_1, a_2, \dots, a_n$ 中，前 $k$ 个节点 $a_1, a_2, \dots ,a_k$ 的<strong>最小权值</strong>最大是多少。</p>
<h3 id="犯傻原因-2"><a href="#犯傻原因-2" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>大概真的就是想不出要怎么写了……然后直接sort一下输出了第 $k$ 大……</p>
<p>结果莫名奇妙水到了20分？</p>
<h3 id="正解-3"><a href="#正解-3" class="headerlink" title="正解"></a>正解</h3><p>​        不难观察到答案是具有二分性质的，因此可以考虑二分答案，即二分最小权值，那么问题就转化成了给出一棵树，树上某些节点是可遍历的（权值大于等于二分出来的答案）某些节点是不可遍历的（权值小于二分出来的答案），问从任意节点开始最多能够遍历多少个节点。</p>
<p>​        这个问题可以通过树型DP解决，考虑当前枚举了某个节点$r$为根，设$dp[x]$表示在以 $x$ 为根的子树中最多遍历的节点数目，转移的话可以考虑是否可以访问完某棵子树，如果能就把这棵子树加入到答案中，如果不能那么找一个$dp$值最大的即可。</p>
<p>​        于是我们可以枚举根节点，然后取其中的最大值，判断是否大于$k$即可，时间复杂度为$O(n^2\log n)$，可以拿到80分。</p>
<p>​        我们发现实际上80分的做法做了很多重复计算，实际上我们完全可以将枚举根的操作换成考虑根的移动，具体来说，我们以$1$号节点为一开始的根，考虑根的移动，假设根从$a$移动到了$a$的一个儿子$b$，那么此时$b$是根，它的$dp$值的变动部分只不过是$b$的父亲外面的那一棵“子树”，因而我们只需要判断是否能够完全遍历外面那棵子树即可，这个可以通过维护$a$周围节点的$dp$值的最大值和次大值得到，因而我们复杂度可以降到$O(n \log n)$。</p>
<h2 id="考试总结"><a href="#考试总结" class="headerlink" title="考试总结"></a>考试总结</h2><p>这次考试分数比较低的主要原因还是在第二题写挂了，然后真的直接废了……</p>
<p>以后有时间可以对拍一下看看自己有没有出现什么错误，然后再交，保证正确性。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/test%20200503/" data-id="ckb0c2c7a00065ygi1dsw3l7p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-test 200502" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/test%20200502/" class="article-date">
  <time datetime="2020-06-04T05:17:23.282Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/test%20200502/">test 200502</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="test-200502"><a href="#test-200502" class="headerlink" title="test 200502"></a>test 200502</h1><p>[TOC]</p>
<h2 id="T1-商店购物"><a href="#T1-商店购物" class="headerlink" title="T1 商店购物"></a>T1 商店购物</h2><h3 id="得分情况"><a href="#得分情况" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：0</p>
<p>实际：0</p>
<p>改后：100</p>
<h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>​        在 Byteland 一共开着 n 家商店,编号依次为 1 到 n,其中编号为 1 到 m 的商店有日消费量上限,第 i 家商店的日消费量上限为 w i 。<br>​        Byteasar 每次购物的过程是这样的:依次经过每家商店,然后购买非负整数价格的商品,并在结账的时候在账本上写上在这家商店消费了多少钱。当然,他在这家商店也可以什么都不买,然后在账本上写上一个 “0”。<br>​        这一天,Byteasar 日常完成了一次购物,但是他不慎遗失了他的账本。他只记得自己这一天一共消费了多少钱,请写一个程序,帮助 Byteasar 计算有多少种可能的账单。</p>
<h3 id="犯傻原因"><a href="#犯傻原因" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>​    可能一开始推公式没什么思路就直接跳过了，后来一直在调试后面的题目就没怎么管了。</p>
<h3 id="正解"><a href="#正解" class="headerlink" title="正解"></a>正解</h3><p>考虑 DP,设 $f[i][j]$ 表示考虑了前 i 个商店,目前选的商店的上限 +1 之和为 $j$ 时的贡献。</p>
<p>如果这个商店不选,那么有 $f[i][j]+ = f[i − 1][j]$,否则有$f[i][j]− = f[i − 1][j − w[i] − 1]$。</p>
<p>$\sum ans = \sum_i f[n][i]C_{k + n − 1 − i}^{ n − 1}$。</p>
<p>时间复杂度 $O(n + k + m^2 w)$。</p>
<h2 id="T2-公路建设"><a href="#T2-公路建设" class="headerlink" title="T2 公路建设"></a>T2 公路建设</h2><h3 id="得分情况-1"><a href="#得分情况-1" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：30</p>
<p>实际：30</p>
<p>改后：100</p>
<h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>在 Byteland 一共有 $n$ 个城市,编号依次为 $1$ 到 $n$ ,它们之间计划修建 $m$ 条双向道路,其中修建第$i$ 条道路的费用为 $c_i$ 。</p>
<p>Byteasar 作为 Byteland 公路建设项目的总工程师,他决定选定一个区间 [l, r],仅使用编号在该区间内的道路。他希望选择一些道路去修建,使得连通块的个数尽量少,同时,他不喜欢修建多余的道路,因此每个连通块都可以看成一棵树的结构。</p>
<p>为了选出最佳的区间,Byteasar 会不断选择 $q$ 个区间,请写一个程序,帮助 Byteasar 计算每个区间内修建公路的最小总费用。</p>
<h3 id="犯傻原因-1"><a href="#犯傻原因-1" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>就一直在那推可能的算法，预处理什么的都想了想还是没想到怎么实现，然后就凉凉写了个暴力了……</p>
<h3 id="正解-1"><a href="#正解-1" class="headerlink" title="正解"></a>正解</h3><p>考虑用线段树直接维护每个区间的答案。</p>
<p>注意到一个区间最多只有 $n − 1$ 条树边有用,所以线段树每个节点按权值从小到大保存区间内用到的树边即可。</p>
<p>合并两个区间的信息时,只需要将树边归并,然后做Kruskal 算法。</p>
<p>时间复杂度 $O((m + q \log m)n \alpha(n))$。</p>
<h2 id="T3-航海舰队"><a href="#T3-航海舰队" class="headerlink" title="T3 航海舰队"></a>T3 航海舰队</h2><h3 id="得分情况-2"><a href="#得分情况-2" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望：30</p>
<p>实际：20</p>
<p>改后：</p>
<h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>Byteasar 组建了一支舰队!他们现在正在海洋上航行着。</p>
<p>海洋可以抽象成一张 $n \times m$ 的网格图,其中有些位置是 “.”,表示这一格是海水,可以通过;有些位<br>置是 “#”,表示这一格是礁石,不可以通过;有些位置是 “o”,表示这一格目前有一艘舰,且舰离开这<br>一格之后,这一格将变为 “.”。</p>
<p>这些 “o” 表示 Byteasar 的舰队,他们每天可以往上下左右中的一个方向移动一格,但不能有任何一<br>艘舰驶出地图。</p>
<p>特别地,Byteasar 对阵形有所研究,所以他不希望在航行的过程中改变阵形,即任何时<br>刻任何两艘舰的相对位置都不能发生变化。</p>
<p>Byteasar 的舰队可以航行无限长的时间,每当一艘舰经过某个格子的时候,这个格子海底的矿藏都<br>将被 Byteasar 获得。</p>
<p>请写一个程序,帮助 Byteasar 计算他最多可以获得多少个格子海底的矿藏?</p>
<h3 id="犯傻原因-2"><a href="#犯傻原因-2" class="headerlink" title="犯傻原因"></a>犯傻原因</h3><p>大概还是不会……</p>
<p>写了个暴力……</p>
<p>然后30-60分没来得及打完就考试结束了就放弃了……</p>
<p>然后还不知道为什么无缘无故T了一个点真的服了自己</p>
<h3 id="正解-2"><a href="#正解-2" class="headerlink" title="正解"></a>正解</h3><p>首先抠出包围了阵形的最小矩形。</p>
<p>将地图拉伸成一条链,即将第一行、第二行、第三行按顺序连接。阵形也可以用同样的方法处理。</p>
<p>那么问题转化为,给定两个 01 串 S 和 T,问每个 S 中长度为 |T| 的子串是否存在一个点,两个串对应字符都是 1。</p>
<p>将 T 串翻转,那么就变成了卷积的形式,FFT 计算即可。</p>
<p>在 BFS 求出所有可行的位置之后,对于答案的计算,也是卷积的形式,用 FFT 加速即可。</p>
<p>时间复杂度 $O(nm \log(nm))$。</p>
<h2 id="考试总结"><a href="#考试总结" class="headerlink" title="考试总结"></a>考试总结</h2><p>想题目的时候思路要清晰些，题目思路断了可能导致浪费很长的的一段时间。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/test%20200502/" data-id="ckb0c2c7900055ygi8zo34avg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-NOI-Online 2 test0425" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/NOI-Online%202%20test0425/" class="article-date">
  <time datetime="2020-06-04T05:17:12.862Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/NOI-Online%202%20test0425/">NOI-Online 2 test0425</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="NOI-Online-2-test0425"><a href="#NOI-Online-2-test0425" class="headerlink" title="NOI-Online 2 test0425"></a>NOI-Online 2 test0425</h1><p>surprise mtf</p>
<h2 id="T1-涂色游戏"><a href="#T1-涂色游戏" class="headerlink" title="T1 涂色游戏"></a>T1 <a href="https://www.luogu.com.cn/problem/P6476" target="_blank" rel="noopener">涂色游戏</a></h2><h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>你有 $10^{20}$ 个格子，它们从 $0$ 开始编号，初始时所有格子都还未染色，现在你按如下规则对它们染色：</p>
<ol>
<li>编号是 $p_1$倍数的格子（包括 $0$ 号格子，下同）染成红色。</li>
<li>编号是 $p_2$ 倍数的格子染成蓝色。</li>
<li>编号既是 $p_1$ 倍数又是 $p_2$ 倍数的格子，你可以选择染成红色或者蓝色。</li>
</ol>
<p>其中 $p_1$ 和 $p_2$ 是给定的整数，若格子编号是 $p_1$ 或 $p_2$ 的倍数则它必须要被染色。在忽略掉所有未染色格子后，你不希望存在 $k$ 个连续的格子颜色相同，因为你认为这种染色方案是无聊的。现在给定 $p_1,p_2,k$，你想知道是否有一种染色方案不是无聊的。</p>
<h3 id="得分情况"><a href="#得分情况" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望得分：100<br>实际得分：0-20（luogu民间估计）<br>改题得分：100</p>
<h3 id="考试想法"><a href="#考试想法" class="headerlink" title="考试想法"></a>考试想法</h3><p>真的心态崩了……公式推错了就很棒棒……没啥好讲的，样例跟……一样水。</p>
<h3 id="正解"><a href="#正解" class="headerlink" title="正解"></a>正解</h3><p>不妨设 $p_1&lt;p_2$，且 $p_1,p_2$ 互质。</p>
<p>则会发现：最坏情况，也就是从 $kp_2+1$ 到 $(k+1)p_2-1$这个连续串内塞 $p_1$ 所对应的颜色。</p>
<p>这样就有 $\dfrac{p_2-2}{p_1}+1$ 个连续块，将其与 $k$ 比较即可。</p>
<p>因为可能不互质，所以可以两边除 $\gcd(p_1,p_2)$ 即可。</p>
<h2 id="T2-子序列问题"><a href="#T2-子序列问题" class="headerlink" title="T2 子序列问题"></a>T2 <a href="https://www.luogu.com.cn/problem/P6477" target="_blank" rel="noopener">子序列问题</a></h2><h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>给定一个长度为 $n$ 的正整数序列 $A_1,A_2,\cdots,A_n$。定义一个函数 $f(l,r)$ 表示：序列中下标在 $[l,r]$范围内的子区间中，不同的整数个数。换句话说，$f(l,r)$ 就是集合 ${A_l,A_{l+1},\cdots,A_r} $的大小，这里的集合是不可重集，即集合中的元素互不相等。</p>
<p>现在，请你求出$\sum_{l=1}^n\sum_{r=l}^n (f(l,r))^2$。由于答案可能很大，请输出答案对 $10^9 +7$ 取模的结果。</p>
<h3 id="得分情况-1"><a href="#得分情况-1" class="headerlink" title="得分情况"></a>得分情况</h3><p>期望得分：100<br>实际得分：70-100（luogu民间估计）<br>改题得分：100（直接开O2没有改动）</p>
<h3 id="考试想法-1"><a href="#考试想法-1" class="headerlink" title="考试想法"></a>考试想法</h3><p>正解……可能我太弱了，没算好复杂度，以为线段树可以过……</p>
<p>而且可能也不是线段树的问题，我用的map，用离散化将快的飞起。</p>
<p>我们从前往后递推当前位置 $i$ 加入了新数 $a_i$。</p>
<p>对于每次加入了$a_i$ 我们需要计算</p>
<p>$tmp_i=\sum_{l=1}^i (f(l,i))^2$,然后就可以直接 $ans=ans+tmp$ 了。</p>
<p>怎样快速的计算$tmp$呢。</p>
<p>不妨设 $b_j$ 为  $f(j,i)$ 。</p>
<p>那么每次枚举到的新的 $b_i$ 为 $1$ 。</p>
<p>对于$b_j(j\in[1,i-1])$ ，设s为最后一次出现 $a_i$ 的位置（离散化和map皆可）。<br>$$<br>b_j=\begin{cases}<br>b_j+1 \quad j\in{[s+1,i-1]}\<br>b_j\quad\quad\ \ \  j\in{[1,s]}<br>\end{cases}\<br>$$<br>这个可以用  <del>线段树</del> 树状数组维护。</p>
<p>此时我们需要计算的 $tmp_i= \sum_{j=1}^ib_j^2$。</p>
<p>此时我们已经有了$tmp_{i-1}$ ，那么我们的问题变为了怎样快速的转换 $tmp_i$。</p>
<p>此时，$b_j,j\in[s+1,i-1]$ 已经变为了$b_j+1$，此时给 $tmp$ 的贡献是多少呢？</p>
<p>我们易知这个小学算式<br>$$<br>(n +1)^2=n^2+2n+1\(n+1)^2-n^2=2n+1<br>$$<br>每个 $b_j,j\in[s+1,i-1]$ 给 $tmp$ 贡献了 $2b_i+1$ 。</p>
<p>我们可以直接用<del>线段树</del> 树状数组计算出$sss=\sum_{j=s+1}^{i-1} 2b_j+1$ 。</p>
<p>那么 $tmp_i=tmp_{i-1}+sss+b_i^2$ ，这里前面讲到了 $b_i=1$ 。</p>
<p>然后就可以愉快的 $ans=ans+tmp_i$了。</p>
<p>这里附上一下线段树的假代码，开 O2 在Luogu 上可过……但是我肯定凉凉了……</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Int signed</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;ma;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sgt_tree</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> a[maxn&lt;&lt;<span class="number">2</span>],f[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">		a[x]=a[x&lt;&lt;<span class="number">1</span>]+a[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(f[x])&#123;</span><br><span class="line">			<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">			f[x&lt;&lt;<span class="number">1</span>]+=f[x];</span><br><span class="line">			f[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=f[x];</span><br><span class="line">			a[x&lt;&lt;<span class="number">1</span>]+=(mid-l+<span class="number">1</span>)*f[x];</span><br><span class="line">			a[x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=(r-mid)*f[x];</span><br><span class="line">			f[x]=<span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(L&gt;R)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> s=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)</span><br><span class="line">			s+=a[x];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			push_down(x,l,r);</span><br><span class="line">			<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(L&lt;=mid)</span><br><span class="line">				s+=sum(x&lt;&lt;<span class="number">1</span>,l,mid,L,R);</span><br><span class="line">			<span class="keyword">if</span>(mid&lt;R)</span><br><span class="line">				s+=sum(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r,L,R);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)&#123;</span><br><span class="line">			a[x]+=r-l+<span class="number">1</span>;</span><br><span class="line">			f[x]++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			push_down(x,l,r);</span><br><span class="line">			<span class="keyword">if</span>(L&lt;=mid)</span><br><span class="line">				add(x&lt;&lt;<span class="number">1</span>,l,mid,L,R);</span><br><span class="line">			<span class="keyword">if</span>(mid&lt;R)</span><br><span class="line">				add(x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r,L,R);</span><br><span class="line">			push_up(x);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;sgt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,c=getchar();</span><br><span class="line">	<span class="keyword">while</span>(!<span class="built_in">isdigit</span>(c))</span><br><span class="line">		c=getchar();</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">isdigit</span>(c))&#123;</span><br><span class="line">		x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+c-<span class="string">'0'</span>;</span><br><span class="line">		c=getchar();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans,tmp;</span><br><span class="line"></span><br><span class="line"><span class="function">Int <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> ZTZ_CPP</span></span><br><span class="line">	freopen(<span class="string">"sequence.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">	freopen(<span class="string">"sequence.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		x=read();</span><br><span class="line">		<span class="keyword">int</span> s=ma[x];</span><br><span class="line">		ma[x]=i;</span><br><span class="line">		<span class="comment">//tmp=(tmp+i-1-s+sgt.sum(1,1,n,s+1,i-1)*2+1)%mod;</span></span><br><span class="line">		tmp=(tmp+i-s+sgt.sum(<span class="number">1</span>,<span class="number">1</span>,n,s+<span class="number">1</span>,i<span class="number">-1</span>)*<span class="number">2</span>%mod)%mod;</span><br><span class="line">		sgt.add(<span class="number">1</span>,<span class="number">1</span>,n,s+<span class="number">1</span>,i);</span><br><span class="line">		ans=(ans+tmp)%mod;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="正解-1"><a href="#正解-1" class="headerlink" title="正解"></a>正解</h3><p>用树状数组……</p>
<h2 id="T3-游戏"><a href="#T3-游戏" class="headerlink" title="T3 游戏"></a>T3 <a href="https://www.luogu.com.cn/problem/P6478" target="_blank" rel="noopener">游戏</a></h2><h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>小 A 和小 B 正在玩一个游戏：有一棵包含 $n=2m$ 个点的有根树（点从 $1\sim n$编号），它的根是 $1$ 号点，初始时两人各拥有 $m$ 个点。游戏的每个回合两人都需要选出一个自己拥有且之前未被选过的点，若对手的点在自己的点的子树内，则该回合自己获胜；若自己的点在对方的点的子树内，该回合自己失败；其他情况视为平局。游戏共进行 $m$ 回合。</p>
<p>作为旁观者的你只想知道，在他们随机选点的情况下，第一次非平局回合出现时的回合数的期望值。<br>为了计算这个期望，你决定对于 $k=0,1,2,\cdots,n$计算出第一次非平局回合出现在第 $k$ 个回合的情况数。两种情况不同当且仅当存在一个小 A 拥有的点 $x$，小 B 在 $x$ 被小 A 选择的那个回合所选择的点不同。</p>
<p>由于情况总数可能很大，你只需要输出答案对 $998244353$ 取模后的结果。</p>
<p>$n \le 5000$</p>
<h3 id="得分情况-2"><a href="#得分情况-2" class="headerlink" title="得分情况"></a>得分情况</h3><p>实际得分：没写<br>改题得分：</p>
<h3 id="正解-2"><a href="#正解-2" class="headerlink" title="正解"></a>正解</h3><p><a href="https://www.luogu.com.cn/blog/wageneral/solution-p6478" target="_blank" rel="noopener">（借用韬哥的sol搞一波）</a></p>
<p>大概？是个玄学数学公式+树上DP吧</p>
<p>树上DP可能想的到，不过真的不知道从何下手就没动了……还是太菜了……</p>
<h2 id="考试总结"><a href="#考试总结" class="headerlink" title="考试总结"></a>考试总结</h2><p>可能还是考试的时候没有多想</p>
<p>第一题看到旁边人推出来了于是也急了</p>
<p>发现自己的公式可以过样例就直接交了一手也没验证……</p>
<p>然后T2想当然的以为map跑得快……</p>
<p>一开始想过要改成离散化的</p>
<p>但是由于懒了还是没去改……然后得分就这么看脸了…………</p>
<p>T3可能也就没啥心情想做了</p>
<p>没看出暴力怎么打于是就放弃了……</p>
<p>下次考试还是要分配好时间</p>
<p>简单的题目多验证几下</p>
<p>然后还要多考虑优化代码，鬼晓得评测机会出什么玄学事故……</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/NOI-Online%202%20test0425/" data-id="ckb0c2c6o00005ygi08mu1zfh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ZZ7 的 CSP-S 划水 退役记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/ZZ7%20%E7%9A%84%20CSP-S%20%E5%88%92%E6%B0%B4%20%E9%80%80%E5%BD%B9%E8%AE%B0/" class="article-date">
  <time datetime="2020-06-04T05:17:02.582Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/ZZ7%20%E7%9A%84%20CSP-S%20%E5%88%92%E6%B0%B4%20%E9%80%80%E5%BD%B9%E8%AE%B0/">ZZ7 的 CSP-S 划水 退役记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ZZ7-的-CSP-S-划水-退役记"><a href="#ZZ7-的-CSP-S-划水-退役记" class="headerlink" title="ZZ7 的 CSP-S 划水 退役记"></a>ZZ7 的 CSP-S <del>划水</del> 退役记</h1><p><del>第一次纯Markdown文本，有点丑勿喷</del></p>
<h3 id="DAY-0"><a href="#DAY-0" class="headerlink" title="DAY 0"></a>DAY 0</h3><p>第一次在考前没颓废一整天，被某大佬教训了半天说要搞学习……<br>考前颓废是我学来的传统啊，对考试帮助极大（<del>貌似的确挺大</del>）</p>
<h3 id="DAY-1"><a href="#DAY-1" class="headerlink" title="DAY 1"></a>DAY 1</h3><h4 id="8-10"><a href="#8-10" class="headerlink" title="8.10"></a>8.10</h4><p>进考场前差点被YALI神仙们祭天，然后跟着<a href="https://www.luogu.org/user/47863" target="_blank" rel="noopener">神明驰</a>进了考场，又遇到许多FHS的神仙。被神仙包围的我弱小而无助。</p>
<h4 id="8-20"><a href="#8-20" class="headerlink" title="8.20"></a>8.20</h4><p>配vim配了10分钟，手抖？我发现按键盘不习惯，为什么键盘的线那么短……我不能拿到桌上来，烦死了……敲的一点都不舒服，有点想把线撤掉的冲动……接着我旁边那个人（貌似是SDFZ（后经过证实，CJ））笑嘻嘻的凑过来说，买我巧克力（我有两）？一边去吧我才不想卖嘞，买个锤子我自己吃都不够。后来想想开个价也不错不开高了50起步。解压密码<strong>Ren2Zhen0Si1Kao9</strong>？？?意思是说，这次考试很费脑？（好像还是有点）</p>
<h4 id="8-50"><a href="#8-50" class="headerlink" title="8.50"></a>8.50</h4><p>T1我想多了，想了半天才发现比较水，结果一开始</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">whlie(n--)&#123;</span><br><span class="line">    <span class="comment">//核心代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>直接挂了，后来才发现我sd了</p>
<p>因该是</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">whlie(n)&#123;</span><br><span class="line">    <span class="comment">//核心代码</span></span><br><span class="line">    n--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要死……</p>
<h4 id="9-00"><a href="#9-00" class="headerlink" title="9.00"></a>9.00</h4><p>T2</p>
<p>草，我觉得啊，部分分最难想，就是一条链我也不会做，但是其他地方反而先想到了，好吧，搞了半天，都要死了，才想出来怎样O[1]每个点。样例3是什么反人类东西，我还一直没发现是一条链，我直接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp bra……3.in bra…….<span class="keyword">in</span></span><br><span class="line">./bra……</span><br></pre></td></tr></table></figure>



<p>运行已结束？？？</p>
<p>浪费了接近<strong>1小时</strong>接近这个问题，等下，我怎么可能RE，哪里炸了？</p>
<p>打开一看，一条链？？？完了，怎么开无限栈去了……啊啊啊啊啊我要怎么测啊……</p>
<h4 id="11-30"><a href="#11-30" class="headerlink" title="11.30"></a>11.30</h4><p>T3</p>
<p>开敲T3，哇30分钟要我写什么？？？我10分都写不完啊，果断放弃</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        read(),read();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,i);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>我此题0分</p>
<h4 id="12-03"><a href="#12-03" class="headerlink" title="12.03"></a>12.03</h4><p>找了<a href="https://www.luogu.org/user/47863" target="_blank" rel="noopener">神明驰</a>，他说他T3只有10分，第一感觉是他很fake，结果后来都说10分正常分，我心安了。</p>
<h4 id="13-30"><a href="#13-30" class="headerlink" title="13.30"></a>13.30</h4><p><del>哇，玩了一中午的火花与卡洛琳，用的我爸手机操作不错。</del></p>
<h4 id="14-10"><a href="#14-10" class="headerlink" title="14.10"></a>14.10</h4><p><del>好羡慕学校里面上课的人啊，我睡了一下午累死了</del></p>
<h4 id="17-30"><a href="#17-30" class="headerlink" title="17.30"></a>17.30</h4><p>睁开眼，想想T2<br>草，我是不是dfs的时候回退没有清一个数组？？？<br><del>草草草，我靠，nia</del></p>
<p>额，但为什么我的样例2过了？</p>
<p>嗯……我可能清了吧，不晓得啊……</p>
<p>凉凉……</p>
<h2 id="DAY-2"><a href="#DAY-2" class="headerlink" title="DAY 2"></a>DAY 2</h2><h4 id="8-20-1"><a href="#8-20-1" class="headerlink" title="8.20"></a>8.20</h4><p><del>嗯？没清空？我看到了昨天某雅礼实验的CSP-J的代码，没什么参考价值。不过用的emacs，还是全透明，真几把帅（不过名字貌似是个妹子）。然后旁边那个（看清楚了，CJ的）又来找我搭讪（他是男的）说显示屏不好？？？我的也是一样啊……</del> 接着就是解压密码<strong>@zhuajin1SHIJIAN</strong>？？？什么东西？？？</p>
<h4 id="8-30"><a href="#8-30" class="headerlink" title="8.30"></a>8.30</h4><p>第一题，什么东西？？？什么鬼啊怎么做啊啊啊啊……我一定可以吧，然后就是1.5H……哇哇哇，一点都没写，好吧放弃</p>
<h4 id="10-00"><a href="#10-00" class="headerlink" title="10.00"></a>10.00</h4><p>嗯……第三题50分貌似还好，打了走人</p>
<h4 id="11-00"><a href="#11-00" class="headerlink" title="11.00"></a>11.00</h4><p>哇哇哇，第二题又是什么？？？要死要死一个小时两题没动？最后一点尊严放下……来来来暴力出奇迹，dfsdfsdfs……</p>
<h4 id="11-30-1"><a href="#11-30-1" class="headerlink" title="11.30"></a>11.30</h4><p>来来来，T1 32分</p>
<h4 id="12-00"><a href="#12-00" class="headerlink" title="12.00"></a>12.00</h4><p>崩溃…… 32+12+55=99？</p>
<p><del>真吉利，跟你马的CSP99，我AFO了</del></p>
<h4 id="12-10"><a href="#12-10" class="headerlink" title="12.10"></a>12.10</h4><p>出考场，<a href="https://www.luogu.org/user/47863" target="_blank" rel="noopener">神明驰</a>不屑于告诉我他怎么样，而<a href="https://www.luogu.org/user/61904" target="_blank" rel="noopener">某大佬</a>说195+140……哇我死了</p>
<h4 id="14-00"><a href="#14-00" class="headerlink" title="14.00"></a>14.00</h4><p><del>跑到友阿浪一圈，我爸请茶颜，去adi看了下NMD然后让店里的人折腾半天帮我找鞋码，好就这双了，果断以茶颜好了为理由离开，打开毒……</del></p>
<h2 id="Day-UK"><a href="#Day-UK" class="headerlink" title="Day -UK"></a>Day -UK</h2><p>好吧，老师的数据测完了，好多神佬都很fake不屑于拿分，我的FHS数据分数：</p>
<table>
<thead>
<tr>
<th align="center">code</th>
<th align="center">brackets</th>
<th align="center">tree</th>
<th align="center"></th>
<th align="center">meal</th>
<th align="center">partition</th>
<th align="center">centriod</th>
<th align="center">Total</th>
</tr>
</thead>
<tbody><tr>
<td align="center">95</td>
<td align="center">100</td>
<td align="center">0</td>
<td align="center"></td>
<td align="center">32</td>
<td align="center">4</td>
<td align="center">40</td>
<td align="center">271</td>
</tr>
<tr>
<td align="center">-5</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">-20</td>
<td align="center"></td>
<td align="center">-25</td>
</tr>
<tr>
<td align="center">1uLL&lt;&lt;64=1？</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">dfs bomb?</td>
<td align="center"></td>
<td align="center">Wo…o</td>
</tr>
<tr>
<td align="center">我怎么能这么菜啊……我觉得AFO还差不多，搞文化课去</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>有点废啊我</p>
<p>退组退组退组退组……</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/ZZ7%20%E7%9A%84%20CSP-S%20%E5%88%92%E6%B0%B4%20%E9%80%80%E5%BD%B9%E8%AE%B0/" data-id="ckb0c2c7200015ygihbkifzjp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-二分图总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E4%BA%8C%E5%88%86%E5%9B%BE%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2020-06-04T05:16:49.718Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E4%BA%8C%E5%88%86%E5%9B%BE%E6%80%BB%E7%BB%93/">二分图总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="二分图总结"><a href="#二分图总结" class="headerlink" title="二分图总结"></a>二分图总结</h1><p>[TOC]</p>
<h3 id="匈牙利算法"><a href="#匈牙利算法" class="headerlink" title="匈牙利算法"></a>匈牙利算法</h3><p>基于贪心的思想。</p>
<ul>
<li><p>首先从任意一个未配对的点 $x$ 开始，选择他的任意一条边（$x$ -  $y$ ），如此时 $y$ 还未配对，则配对成功，配对数加一，若 $y$ 已经配对，则尝试寻找 的配对的另一个配对（该步骤可能会被递归的被执行多次），若该尝试成功，则配对成功，配对数加一。</p>
</li>
<li><p>若果上一步配对不成功，那么选择重新选择一条未被选择过的边，重复上一步。</p>
</li>
<li><p>对剩下每一个没有被配对的点执行步骤 1，直到所有的点都尝试完毕。</p>
</li>
</ul>
<h3 id="最小点覆盖"><a href="#最小点覆盖" class="headerlink" title="最小点覆盖"></a>最小点覆盖</h3><p>让每条边都至少和其中一个点关联。</p>
<p>二分图最小点覆盖集的大小=二分图最大匹配集的大小</p>
<h3 id="最大独立集问题"><a href="#最大独立集问题" class="headerlink" title="最大独立集问题"></a>最大独立集问题</h3><p>最多点，互不相连</p>
<p>二分图最大独立集=图的点数-二分图最大匹配</p>
<h3 id="DAG图的最小路径覆盖"><a href="#DAG图的最小路径覆盖" class="headerlink" title="DAG图的最小路径覆盖"></a>DAG图的最小路径覆盖</h3><p>解决此类问题可以建立一个二分图模型。把所有顶点 $i $拆成两个：Ｘ结点集中的 $i$ 和Y结点集中的 $i’$ ,如果有边$i\  to\ j $，则在二分图中引入边$i\ to\ j’$，设二分图最大匹配为 $m$ ,则结果就是$ n-m$ </p>
<p>最小路径覆盖数=原有向图节点数-新二分图最大匹配数。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>通过以上定理，只要通过匈牙利或者网络流就可以求出最大匹配，然后直接计算答案。一般考点在于对题目的分析，学会如何建图，这样才能做出题。</p>
<h3 id="KM算法"><a href="#KM算法" class="headerlink" title="KM算法"></a>KM算法</h3><h4 id="一些申明"><a href="#一些申明" class="headerlink" title="一些申明"></a>一些申明</h4><ul>
<li><strong>顶标</strong>：    对于每个点有个值，要求 $\forall i,j,A_{i}+B_{j} \ge w(i,j)$ ，$w(i,j)$,为边权，无边时为  $-\propto $  。</li>
<li><strong>交错树</strong>：每次dfs访问的点所形成的的一颗树</li>
<li><strong>相等子图</strong>：如果对于子图所有节点 和 满足 $A_{i}+B_{j} = w(i,j)$ 的边 ,那么这个子图为相等子图。</li>
</ul>
<h3 id="定理"><a href="#定理" class="headerlink" title="定理"></a>定理</h3><p>若相等子图中存在完备匹配，则这个完备匹配为这个二分图的带权最大匹配</p>
<h3 id="计算"><a href="#计算" class="headerlink" title="计算"></a>计算</h3><p>为了保证顶标符合条件，在所有 $i \in T,j \notin T$ 的边 $(i,j)$ ，找出最小的$A_{i}+B_{j}-w(i,j)$ 作为$\Delta$ ,在原图中寻找完备匹配即可。不断重复上述条件，直到每个左边点匹配成功</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二分图带权最大匹配：KM算法</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> w[N][N]; <span class="comment">// 边权</span></span><br><span class="line"><span class="keyword">int</span> la[N], lb[N]; <span class="comment">// 左、右部点的顶标</span></span><br><span class="line"><span class="keyword">bool</span> va[N], vb[N]; <span class="comment">// 访问标记：是否在交错树中</span></span><br><span class="line"><span class="keyword">int</span> match[N]; <span class="comment">// 右部点匹配了哪一个左部点</span></span><br><span class="line"><span class="keyword">int</span> n, delta, upd[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	va[x] = <span class="number">1</span>; <span class="comment">// 访问标记：x在交错树中</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">1</span>; y &lt;= n; y++)</span><br><span class="line">		<span class="keyword">if</span> (!vb[y])</span><br><span class="line">			<span class="keyword">if</span> (la[x] + lb[y] - w[x][y] == <span class="number">0</span>) &#123; <span class="comment">// 相等子图</span></span><br><span class="line">				vb[y] = <span class="number">1</span>; <span class="comment">// 访问标记：y在交错树中</span></span><br><span class="line">				<span class="keyword">if</span> (!match[y] || dfs(match[y])) &#123;</span><br><span class="line">					match[y] = x;</span><br><span class="line">					<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> upd[y] = min(upd[y], la[x] + lb[y] - w[x][y]);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">KM</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		la[i] = -(<span class="number">1</span> &lt;&lt; <span class="number">30</span>); <span class="comment">// -inf</span></span><br><span class="line">		lb[i] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">			la[i] = max(la[i], w[i][j]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		<span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// 直到左部点找到匹配</span></span><br><span class="line">			<span class="built_in">memset</span>(va, <span class="number">0</span>, <span class="keyword">sizeof</span>(va));</span><br><span class="line">			<span class="built_in">memset</span>(vb, <span class="number">0</span>, <span class="keyword">sizeof</span>(vb));</span><br><span class="line">			delta = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; <span class="comment">// inf</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) upd[j] = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; </span><br><span class="line">			<span class="keyword">if</span> (dfs(i)) <span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">				<span class="keyword">if</span> (!vb[j]) delta = min(delta, upd[j]);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123; <span class="comment">// 修改顶标</span></span><br><span class="line">				<span class="keyword">if</span> (va[j]) la[j] -= delta;</span><br><span class="line">				<span class="keyword">if</span> (vb[j]) lb[j] += delta;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">		ans += w[match[i]][i];</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="大致模型"><a href="#大致模型" class="headerlink" title="大致模型"></a>大致模型</h3><ul>
<li>一分为二一个点拆开两边各一个</li>
<li>行列模型</li>
<li>黑白染色模型</li>
<li>稳定婚姻模型</li>
<li>最小点覆盖</li>
<li>最大独立集</li>
<li>最小路径覆盖</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E4%BA%8C%E5%88%86%E5%9B%BE%E6%80%BB%E7%BB%93/" data-id="ckb0c2c7g000a5ygiag13042d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-网络流总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E7%BD%91%E7%BB%9C%E6%B5%81%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2020-06-04T05:16:39.534Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E7%BD%91%E7%BB%9C%E6%B5%81%E6%80%BB%E7%BB%93/">网络流总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="网络流总结"><a href="#网络流总结" class="headerlink" title="网络流总结"></a>网络流总结</h1><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h3><p>设 定义在二元组 上的实数函数且满足</p>
<ol>
<li>容量限制：对于每条边，流经该边的流量不得超过该边的容量，即$f(u,v) \le c(u,v)$ </li>
<li>斜对称性：每条边的流量与其相反边的流量之和为 0，即 $f(u,v) = -f(v,u)$</li>
<li>流守恒性：从源点流出的流量等于汇点流入的流量</li>
</ol>
<h4 id="最大流"><a href="#最大流" class="headerlink" title="最大流"></a>最大流</h4><p>我们有一张图，要求从源点流向汇点的最大流量（可以有很多条路到达汇点），就是我们的最大流问题。</p>
<h4 id="最小费用最大流"><a href="#最小费用最大流" class="headerlink" title="最小费用最大流"></a>最小费用最大流</h4><p>最小费用最大流问题是这样的：每条边都有一个费用，代表单位流量流过这条边的开销。我们要在求出最大流的同时，要求花费的费用最小。</p>
<h4 id="最小割"><a href="#最小割" class="headerlink" title="最小割"></a>最小割</h4><p>割其实就是删边的意思，当然最小割就是割掉 $X$ 条边来让 $S$ 跟 $T$ 不互通。我们要求  $X$条边加起来的流量综合最小。这就是最小割问题。</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p><strong>Dinic 算法</strong> 的过程是这样的：每次增广前，我们先用 BFS 来将图分层。设源点的层数为 ，那么一个点的层数便是它离源点的最近距离。</p>
<p>通过分层，我们可以干两件事情：</p>
<ol>
<li>如果不存在到汇点的增广路（即汇点的层数不存在），我们即可停止增广。</li>
<li>确保我们找到的增广路是最短的。（原因见下文）</li>
</ol>
<p>接下来是 DFS 找增广路的过程。</p>
<p>我们每次找增广路的时候，都只找比当前点层数多 的点进行增广（这样就可以确保我们找到的增广路是最短的）。</p>
<p>Dinic 算法有两个优化：</p>
<ol>
<li><strong>多路增广</strong> ：每次找到一条增广路的时候，如果残余流量没有用完怎么办呢？我们可以利用残余部分流量，再找出一条增广路。这样就可以在一次 DFS 中找出多条增广路，大大提高了算法的效率。</li>
<li><strong>当前弧优化</strong> ：如果一条边已经被增广过，那么它就没有可能被增广第二次。那么，我们下一次进行增广的时候，就可以不必再走那些已经被增广过的边。</li>
</ol>
<h3 id="最小费用最大流-1"><a href="#最小费用最大流-1" class="headerlink" title="最小费用最大流"></a>最小费用最大流</h3><p>网络流图中，花费最小的最大流被称为 <strong>最小费用最大流</strong> ，这也是接下来我们要研究的对象。</p>
<h4 id="类似Dinic算法"><a href="#类似Dinic算法" class="headerlink" title="类似Dinic算法"></a>类似Dinic算法</h4><p>我们可以在 Dinic 算法的基础上进行改进，把 BFS 求分层图改为用 SPFA（由于有负权边，所以不能直接用 Dijkstra）来求一条单位费用之和最小的路径，也就是把 $w(u,v)$ 当做边权然后在残量网络上求最短路，当然在 DFS 中也要略作修改。这样就可以求得网络流图的 <strong>最小费用最大流</strong> 了。</p>
<p>对于一条边 $(u,v,w,c)$（其中 $w$ 和  $c$ 分别为容量和费用），我们建立正向边 (u,v,w,c)和反向边 $(v,u,0,-c)$（其中 $-c$ 是使得从反向边经过时退回原来的费用）。</p>
<h3 id="上下界网络流"><a href="#上下界网络流" class="headerlink" title="上下界网络流"></a>上下界网络流</h3><p>上下界网络流本质是给流量网络的每一条边设置了流量上界 $c(u,v)$ 和流量下界 $b(u,v)$ 。也就是说，一种可行的流必须满足 $b(u,v) \le f(u,v) \le c(u,v)$ 。同时必须满足除了源点和汇点之外的其余点流量平衡。</p>
<h3 id="最大权闭合子图"><a href="#最大权闭合子图" class="headerlink" title="最大权闭合子图"></a>最大权闭合子图</h3><h4 id="闭合子图："><a href="#闭合子图：" class="headerlink" title="闭合子图："></a>闭合子图：</h4><ol>
<li>它是一种子图 </li>
<li>它还是有向图的子图</li>
<li>它还可以一路走到底</li>
<li>对于每个点，从它出发，<strong>能够走到的所有点都属于闭合子图中</strong></li>
</ol>
<p>最大权闭合子图就是原图中点权和最大的闭合子图。</p>
<h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><p>最大权闭合子图问题可以使用<strong>最小割</strong>解决</p>
<h5 id="连边方式"><a href="#连边方式" class="headerlink" title="连边方式"></a>连边方式</h5><ul>
<li><p>对于所有原图中的边$ (u, v)$ ，连边 $u \rightarrow v$，容量为 $\inf$ 。</p>
</li>
<li><p>对于每个原图中的点 $u$ ，设 $u$ 的权值为 $val[u]$ ：</p>
<ol>
<li>若 $val[u] &gt; 0$（正权点），连边 $S \rightarrow u$ ，容量为 $val[u]$。</li>
<li>若 $val[u] &lt; 0 $（负权点），连边 $u \rightarrow T$ ，容量为 $-val[u]$。</li>
</ol>
</li>
</ul>
<p>至于 $val[u] = 0$（零权点）的情况，向 $S$  还是 $T$连边对答案并没有影响。</p>
<p>直接跑最小割,最大权 = 正点权和 - 最小割，而最大权闭合子图的节点就是与 $S$ 联通的部分。</p>
<h2 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h2><h3 id="拆点"><a href="#拆点" class="headerlink" title="拆点"></a>拆点</h3><p>对于一个有点权的点来说，拆点就是把一个点拆开为多个，这样可以方便把点权变成边权，满足题目的一些要求。</p>
<h3 id="缩点"><a href="#缩点" class="headerlink" title="缩点"></a>缩点</h3><p>对于一些题来说，如果直接加点建边很有可能因为边和点过多而挂掉，此时就需要按照题意来进行建边上的优化。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E7%BD%91%E7%BB%9C%E6%B5%81%E6%80%BB%E7%BB%93/" data-id="ckb0c2c7o000e5ygigy9k36c5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据结构总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/04/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2020-06-04T05:16:29.390Z" itemprop="datePublished">2020-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/04/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/">数据结构总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="数据结构总结"><a href="#数据结构总结" class="headerlink" title="数据结构总结"></a>数据结构总结</h1><p>[TOC]</p>
<h2 id="堆"><a href="#堆" class="headerlink" title="堆"></a>堆</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>可以用于维护整体的一个最值，插入删除均为O(logn)，求最值为O(1)。</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>用一个二叉树维护，父亲比儿子更满足条件，每次插入就加，然后再浮上来，删除就把最后一个树放过来然后再删除</p>
<h3 id="运用"><a href="#运用" class="headerlink" title="运用"></a>运用</h3><p>用处比较广，可以优化DP，降低复杂度，在短时间内求出最值，一般可以直接使用priority_queue实现</p>
<h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><h3 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h3><p>可以维护一个多个集合，查询两对象是否在同一集合，合并操作</p>
<h3 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h3><p>通过记住父亲节点，一般先将父亲指向自己，查询时通过root判断是否在一个集合里</p>
<h3 id="运用-1"><a href="#运用-1" class="headerlink" title="运用"></a>运用</h3><p>可以使用路径压缩以及按秩合并，可以从O(n)压到O(1)，一般都用于维护集合</p>
<h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><h3 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h3><p>可以将一些比较大的数或一些数压缩到范围可控你的一个数，用这个数来判断和其他的关系</p>
<h3 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h3><p>一般是用一定的函数实现，计算贡献为一个数，通过取模运算控制得到的数的范围，对于可能产生的冲突可以通过多层hash降低冲突概率。</p>
<h3 id="运用-2"><a href="#运用-2" class="headerlink" title="运用"></a>运用</h3><p>字符串比较比较常用，与处理后O1比较字符串是否相同，以及可以在搜索中压缩状态。对于冲突，一般双hash的冲突概率就很小了，基本够用</p>
<h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><h3 id="功能-3"><a href="#功能-3" class="headerlink" title="功能"></a>功能</h3><p>可以比较模式串在文本串中出现的位置的次数</p>
<h3 id="实现-3"><a href="#实现-3" class="headerlink" title="实现"></a>实现</h3><p>使用失配函数，减少回的步数，优化匹配</p>
<h3 id="运用-3"><a href="#运用-3" class="headerlink" title="运用"></a>运用</h3><p>用于字符串的匹配</p>
<h2 id="Trie"><a href="#Trie" class="headerlink" title="Trie"></a>Trie</h2><h3 id="功能-4"><a href="#功能-4" class="headerlink" title="功能"></a>功能</h3><p>字典树可以在O(len)的时间加入和查询一个词是否在字典中，同时也可以用些骚操作维护其他的数字，经典有01trie</p>
<h3 id="实现-4"><a href="#实现-4" class="headerlink" title="实现"></a>实现</h3><p>以字符串为例子，trie是一颗树，每个节点都存有一个字母，查询时每次通向下个字符所在边。</p>
<h3 id="运用-4"><a href="#运用-4" class="headerlink" title="运用"></a>运用</h3><p>大多是判断一个字符串是否出现过为基础，同时也可以存数字，01trie是个很好的例子，可以用01来表示二进制里的数字，甚至可以做平衡树板子</p>
<h2 id="AC自动机"><a href="#AC自动机" class="headerlink" title="AC自动机"></a>AC自动机</h2><h3 id="功能-5"><a href="#功能-5" class="headerlink" title="功能"></a>功能</h3><p>可以查询多个模式串在文本串中出现的次数。</p>
<h3 id="实现-5"><a href="#实现-5" class="headerlink" title="实现"></a>实现</h3><p>可以说是吧KMP的思想放到Trie上，用fail指针在trie上跳动，来满足要求</p>
<h3 id="运用-5"><a href="#运用-5" class="headerlink" title="运用"></a>运用</h3><p>一般就用于字符串的问题</p>
<h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><h3 id="功能-6"><a href="#功能-6" class="headerlink" title="功能"></a>功能</h3><p>可以动态维护前缀和</p>
<h3 id="实现-6"><a href="#实现-6" class="headerlink" title="实现"></a>实现</h3><p>通过一些需要依靠图片我没有的解释但技巧，使得空间在O(n)，复杂度在O(logn)的范围内实现</p>
<h3 id="运用-6"><a href="#运用-6" class="headerlink" title="运用"></a>运用</h3><p>一般就是动态维护前缀和，单点修改，也可维护差分数组，来实现区间修改。</p>
<h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><h3 id="功能-7"><a href="#功能-7" class="headerlink" title="功能"></a>功能</h3><p>包含所有树状数组的功能以及一些树状数组不能维护的东东。</p>
<h3 id="实现-7"><a href="#实现-7" class="headerlink" title="实现"></a>实现</h3><p>叶子节点存下当前位置的值，每个父亲都存下儿子的答案。一般复杂度是O($\log  n$)的，常数较大，空间复杂度也大，代码长度也比较长。但是运用情况非常多，可以解决大部分情况。</p>
<h3 id="运用-7"><a href="#运用-7" class="headerlink" title="运用"></a>运用</h3><p>基本都是在维护方式和push_down操作上出题，一般思维比较大。然后线段树可以和很多数据结构并用也是一些数据结构的基础。</p>
<h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><h3 id="功能-8"><a href="#功能-8" class="headerlink" title="功能"></a>功能</h3><p>O($n \log n$)预处理查询区间最值。</p>
<h3 id="实现-8"><a href="#实现-8" class="headerlink" title="实现"></a>实现</h3><p>这是倍增的产物，通过  $f_{i,j}$ 表示从 $i$开始长度为 $1\ll j$ 的部分的最值，查询的时候直接首位开始交叉形成查询空间。</p>
<h3 id="运用-8"><a href="#运用-8" class="headerlink" title="运用"></a>运用</h3><p>可以以很短的代码长度以及很快的速度求出区间最值，也可用于末尾加数。</p>
<h2 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h2><h3 id="功能-9"><a href="#功能-9" class="headerlink" title="功能"></a>功能</h3><p>查询最近公共祖先</p>
<h3 id="实现-9"><a href="#实现-9" class="headerlink" title="实现"></a>实现</h3><p>可以用倍增来优化速度，使用倍增算法可以快速的找出最近公共祖先</p>
<p>也可以通过树剖来实现，没写过只听说过。</p>
<h3 id="运用-9"><a href="#运用-9" class="headerlink" title="运用"></a>运用</h3><p>运用的话基本就是辅助功能，查询最近公共祖先，可以在树上差分，树上前缀和。</p>
<h2 id="平衡树"><a href="#平衡树" class="headerlink" title="平衡树"></a>平衡树</h2><h3 id="功能-10"><a href="#功能-10" class="headerlink" title="功能"></a>功能</h3><p>是二叉查找树的优化版，查找删除一个数，查询前驱后继，查询排名。由于二叉查找树可能退化到O(n)，所以要用平衡树保证深度大致在$\log n$的范围。</p>
<h3 id="实现-10"><a href="#实现-10" class="headerlink" title="实现"></a>实现</h3><h4 id="treap"><a href="#treap" class="headerlink" title="treap"></a>treap</h4><p>是tree和heap的产物，对每个点随机一个值，在满足二叉查找树的同时维护随机值为一个堆，基本上随机的情况下只有 $\log n$ 的深度，满足情况。</p>
<h4 id="Splay"><a href="#Splay" class="headerlink" title="Splay"></a>Splay</h4><p>通过对每次查询的值旋转到根节点来满足要求。</p>
<h3 id="运用-10"><a href="#运用-10" class="headerlink" title="运用"></a>运用</h3><h2 id="树链剖分"><a href="#树链剖分" class="headerlink" title="树链剖分"></a>树链剖分</h2><h3 id="功能-11"><a href="#功能-11" class="headerlink" title="功能"></a>功能</h3><p>将一棵树剖分为很多条链，重新编号，满足链上编号的相同，可以用其他数据结构维护。</p>
<h3 id="实现-11"><a href="#实现-11" class="headerlink" title="实现"></a>实现</h3><p>这里用的是重链剖分，将连接重儿子的链称为重边，将所有重边连成的链叫重链，这样就可以区间维护了。</p>
<h3 id="运用-11"><a href="#运用-11" class="headerlink" title="运用"></a>运用</h3><p>一般是和线段树一起用，这样可以维护子树，最短路径上的情况。</p>
<h2 id="LCT"><a href="#LCT" class="headerlink" title="LCT"></a>LCT</h2><h3 id="功能-12"><a href="#功能-12" class="headerlink" title="功能"></a>功能</h3><p>维护一个森林, 支持删除某条边，加⼊某条边，并保证加边，删边之后仍是森林。我们要维护这个森林的一些信息。</p>
<h3 id="实现-12"><a href="#实现-12" class="headerlink" title="实现"></a>实现</h3><p>可以先用实链剖分，我们建很多个Splay 来维护每个链区间的信息。</p>
<p>这里用上辅助树，辅助树是可以在满足辅助树、Splay 的性质下任意换根的。</p>
<h3 id="运用-12"><a href="#运用-12" class="headerlink" title="运用"></a>运用</h3><p>可以类似于树链剖分，但这个是维护一个森林。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/04/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/" data-id="ckb0c2c7m000d5ygi55xihnff" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/04/%E5%A4%87%E4%BB%BD/">备份</a>
          </li>
        
          <li>
            <a href="/2020/06/04/test200411/">test200411</a>
          </li>
        
          <li>
            <a href="/2020/06/04/%E5%88%86%E5%9D%97%E6%9D%BF%E5%AD%90/">分块板子</a>
          </li>
        
          <li>
            <a href="/2020/06/04/test%20200503/">test 200503</a>
          </li>
        
          <li>
            <a href="/2020/06/04/test%20200502/">test 200502</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 zzt<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>